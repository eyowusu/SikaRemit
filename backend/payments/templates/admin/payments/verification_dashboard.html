{% extends "admin/base_site.html" %}
{% load static %}

{% block content %}
<div class="verification-dashboard">
    <h1>Verification Analytics Dashboard</h1>
    
    <div class="grid-container">
        <!-- Health Status Card -->
        <div class="dashboard-card">
            <h2><i class="fas fa-heartbeat"></i> Provider Health</h2>
            <div id="health-status-chart"></div>
        </div>
        
        <!-- Geographic Card -->
        <div class="dashboard-card">
            <h2><i class="fas fa-globe-africa"></i> Regional Performance</h2>
            <div id="geo-performance-chart"></div>
        </div>
        
        <!-- Outage Alerts Card -->
        <div class="dashboard-card alerts">
            <h2><i class="fas fa-bell"></i> Recent Alerts</h2>
            <ul id="outage-alerts">
                {% for alert in alerts %}
                <li class="{{ 'resolved' if alert.status else 'critical' }}">
                    <strong>{{ alert.provider }}</strong> - {{ alert.message }}
                    {% if alert.region %}({{ alert.region }}){% endif %}
                    <small>{{ alert.timestamp|date:'Y-m-d H:i' }}</small>
                </li>
                {% endfor %}
            </ul>
        </div>
        
        <!-- Trends Card -->
        <div class="dashboard-card">
            <h2><i class="fas fa-chart-line"></i> Historical Trends</h2>
            <div id="trends-chart"></div>
        </div>
        
        <!-- Verification Stats Card -->
        <div class="dashboard-card">
            <h2>Verification Stats</h2>
            <div id="verification-stats"></div>
        </div>
    </div>
</div>

<!-- Include Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
<script src="{% static 'admin/js/verification_dashboard.js' %}"></script>

<style>
.dashboard-card {
    background: white;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    margin-bottom: 20px;
}

alerts li.critical {
    color: #e74c3c;
    font-weight: bold;
}
</style>
{% endblock %}
